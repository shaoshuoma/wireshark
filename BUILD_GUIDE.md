# Wireshark è‡ªç¼–è¯‘æ„å»ºæŒ‡å—

## ğŸ‰ æ„å»ºæˆåŠŸï¼

æ­å–œï¼æ‚¨å·²æˆåŠŸä»æºä»£ç ç¼–è¯‘äº†Wireshark 4.5.0ç‰ˆæœ¬ï¼Œå¯ä»¥è¿›è¡ŒäºŒæ¬¡å¼€å‘äº†ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
D:\mss\wireshark\
â”œâ”€â”€ epan/                    # æ ¸å¿ƒåŒ…åˆ†æå¼•æ“
â”‚   â”œâ”€â”€ dissectors/          # åè®®è§£æå™¨ (1800+åè®®)
â”‚   â”œâ”€â”€ dfilter/            # æ˜¾ç¤ºè¿‡æ»¤å™¨å¼•æ“
â”‚   â””â”€â”€ wslua/              # Luaè„šæœ¬æ”¯æŒ
â”œâ”€â”€ ui/qt/                  # Qtå›¾å½¢ç•Œé¢
â”œâ”€â”€ tools/                  # å¼€å‘å·¥å…·
â”œâ”€â”€ build-msys2/            # ç¼–è¯‘æ„å»ºç›®å½•
â”‚   â””â”€â”€ run/                # å¯æ‰§è¡Œæ–‡ä»¶ç›®å½•
â””â”€â”€ å¯åŠ¨è„šæœ¬/
    â”œâ”€â”€ run-wireshark.bat   # GUIç‰ˆæœ¬å¯åŠ¨
    â”œâ”€â”€ run-tshark.bat      # å‘½ä»¤è¡Œç‰ˆæœ¬å¯åŠ¨
    â””â”€â”€ dev-setup.bat       # å¼€å‘ç¯å¢ƒè®¾ç½®
```

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### å¯åŠ¨å›¾å½¢ç•Œé¢ç‰ˆæœ¬
```bash
# åŒå‡»è¿è¡Œ
run-wireshark.bat

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
cd D:\mss\wireshark\build-msys2\run
wireshark.exe
```

### å¯åŠ¨å‘½ä»¤è¡Œç‰ˆæœ¬
```bash
# åŒå‡»è¿è¡Œ
run-tshark.bat

# æˆ–è€…æ‰‹åŠ¨å¯åŠ¨
cd D:\mss\wireshark\build-msys2\run
tshark.exe --version
```

### è¿›å…¥å¼€å‘ç¯å¢ƒ
```bash
# åŒå‡»è¿è¡Œ
dev-setup.bat
```

## ğŸ› ï¸ ç¼–è¯‘ç¯å¢ƒä¿¡æ¯

- **ç¼–è¯‘å™¨**: GCC 15.1.0 (MSYS2/MinGW-w64)
- **æ„å»ºç³»ç»Ÿ**: CMake + Ninja
- **GUIæ¡†æ¶**: Qt 6.9.1
- **æ“ä½œç³»ç»Ÿ**: Windows 11 64ä½
- **ç¼–è¯‘æ—¶é—´**: çº¦15-20åˆ†é’Ÿ (é¦–æ¬¡ç¼–è¯‘)

## ğŸ“¦ ç¼–è¯‘ç”Ÿæˆçš„ç¨‹åº

| ç¨‹åº | å¤§å° | æè¿° |
|------|------|------|
| `wireshark.exe` | ~303MB | ä¸»è¦çš„å›¾å½¢ç•Œé¢ç¨‹åº |
| `tshark.exe` | ~2.6MB | å‘½ä»¤è¡Œç‰ˆæœ¬ |
| `dumpcap.exe` | ~2.1MB | åŒ…æ•è·å·¥å…· |
| `capinfos.exe` | ~695KB | æ•è·æ–‡ä»¶ä¿¡æ¯å·¥å…· |
| `editcap.exe` | ~920KB | æ•è·æ–‡ä»¶ç¼–è¾‘å·¥å…· |
| `mergecap.exe` | ~621KB | æ•è·æ–‡ä»¶åˆå¹¶å·¥å…· |

## ğŸ”§ äºŒæ¬¡å¼€å‘æŒ‡å—

### é‡æ–°ç¼–è¯‘
```bash
cd D:\mss\wireshark\build-msys2
ninja                    # å¢é‡ç¼–è¯‘
ninja clean && ninja     # å®Œå…¨é‡æ–°ç¼–è¯‘
```

### ä¿®æ”¹æºä»£ç åç¼–è¯‘
1. ä¿®æ”¹æºä»£ç æ–‡ä»¶ (å¦‚ `epan/dissectors/packet-*.c`)
2. è¿è¡Œ `cd build-msys2 && ninja`
3. æµ‹è¯•æ–°ç¼–è¯‘çš„ç¨‹åº

### æ·»åŠ æ–°çš„åè®®è§£æå™¨
1. åœ¨ `epan/dissectors/` ç›®å½•åˆ›å»ºæ–°çš„ `packet-yourprotocol.c`
2. å‚è€ƒç°æœ‰è§£æå™¨çš„æ¨¡å¼
3. é‡æ–°ç¼–è¯‘å¹¶æµ‹è¯•

### ä¿®æ”¹UIç•Œé¢
1. ä¿®æ”¹ `ui/qt/` ç›®å½•ä¸‹çš„æ–‡ä»¶
2. `.ui` æ–‡ä»¶ï¼šç•Œé¢å¸ƒå±€
3. `.cpp/.h` æ–‡ä»¶ï¼šé€»è¾‘ä»£ç 
4. é‡æ–°ç¼–è¯‘

## ğŸ§ª æµ‹è¯•å’Œè°ƒè¯•

### åŸºæœ¬æµ‹è¯•
```bash
# æ£€æŸ¥ç¨‹åºç‰ˆæœ¬
wireshark.exe --version
tshark.exe --version

# åˆ—å‡ºç½‘ç»œæ¥å£
tshark.exe -D

# æ•è·å°‘é‡åŒ…è¿›è¡Œæµ‹è¯•
tshark.exe -i 1 -c 5
```

### è°ƒè¯•
- ä½¿ç”¨ `gdb` è°ƒè¯•: `gdb wireshark.exe`
- å¯ç”¨è°ƒè¯•ç¬¦å· (å·²é…ç½® RelWithDebInfo)
- æŸ¥çœ‹æ—¥å¿—è¾“å‡º

## ğŸ“š æœ‰ç”¨çš„å¼€å‘èµ„æº

### Wiresharkå®˜æ–¹æ–‡æ¡£
- [å¼€å‘è€…æŒ‡å—](https://www.wireshark.org/docs/wsdg_html_chunked/)
- [ç”¨æˆ·æŒ‡å—](https://www.wireshark.org/docs/wsug_html_chunked/)
- [åè®®è§£æå™¨å¼€å‘](https://wiki.wireshark.org/Development/DissectorDevelopment)

### æºä»£ç å…³é”®ç›®å½•
- `epan/dissectors/` - åè®®è§£æå™¨
- `ui/qt/` - Qtå›¾å½¢ç•Œé¢
- `tools/` - å¼€å‘å·¥å…·å’Œè„šæœ¬
- `doc/` - æ–‡æ¡£æºæ–‡ä»¶

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¾èµ–ç¯å¢ƒ**: éœ€è¦MSYS2ç¯å¢ƒï¼Œç¡®ä¿ `C:\msys64\ucrt64\bin` åœ¨PATHä¸­
2. **å¢é‡ç¼–è¯‘**: åªä¿®æ”¹å°‘é‡æ–‡ä»¶æ—¶ä½¿ç”¨ `ninja` å³å¯ï¼Œæ— éœ€å®Œå…¨é‡æ–°ç¼–è¯‘
3. **å†…å­˜éœ€æ±‚**: ç¼–è¯‘è¿‡ç¨‹å¯èƒ½éœ€è¦8GB+å†…å­˜
4. **ç£ç›˜ç©ºé—´**: å®Œæ•´ç¼–è¯‘éœ€è¦çº¦2GBç£ç›˜ç©ºé—´

## ğŸ†˜ å¸¸è§é—®é¢˜

### Q: ç¼–è¯‘å¤±è´¥æ€ä¹ˆåŠï¼Ÿ
A: æ£€æŸ¥ä¾èµ–æ˜¯å¦å®Œæ•´å®‰è£…ï¼Œæ¸…ç†æ„å»ºç›®å½•åé‡è¯•ï¼š
```bash
cd build-msys2
rm -rf *
cmake -G Ninja -DCMAKE_BUILD_TYPE=RelWithDebInfo ..
ninja
```

### Q: ç¨‹åºå¯åŠ¨å¤±è´¥ï¼Ÿ
A: ç¡®ä¿MSYS2è·¯å¾„åœ¨ç¯å¢ƒå˜é‡ä¸­ï¼Œæˆ–ä½¿ç”¨æä¾›çš„å¯åŠ¨è„šæœ¬ã€‚

### Q: å¦‚ä½•æ›´æ–°æºä»£ç ï¼Ÿ
A: ä½¿ç”¨gitæ‹‰å–æœ€æ–°ä»£ç åé‡æ–°ç¼–è¯‘ï¼š
```bash
git pull origin master
cd build-msys2
ninja
```

---

**ç¥æ‚¨å¼€å‘æ„‰å¿«ï¼** ğŸ‰

å¦‚æœ‰é—®é¢˜ï¼Œå¯å‚è€ƒ [Wiresharkå¼€å‘è€…é‚®ä»¶åˆ—è¡¨](https://www.wireshark.org/lists/) æˆ–å®˜æ–¹æ–‡æ¡£ã€‚ 